<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" type="image/ico" href="assets/images/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href='https://use.fontawesome.com/releases/v5.8.1/css/all.css'>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
            integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
            crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
            integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/assets/css/main.css?v=">

    <title>Climate Explorer API Guide</title>

  </head>

  <body>

    <nav id="topnav" class="navbar navbar-expand-lg navbar-dark fixed-top">
      <div class="container">

        <a class="navbar-brand" href="/">
          <img src="/assets/images/sust-HexLogoONLYwhite.png" />
          <span>Developer Center</span>
        </a>

        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://explorer.sustglobal.io/">
              Climate Explorer
              <i class="fas fa-external-link-alt fa-sm"></i>
            </a>
          </li>
        </ul>

      </div>
    </nav>

    <div class="container" id="allcontent">
      <div class="d-flex flex-direction-row flex-nowrap">

        <div class="flex-grow-1 col-9">
          <div id="innercontent">
            <h1>Climate Explorer API Guide</h1>
            <p>Sust Global’s Climate Explorer API is a RESTful API interface to Sust Global’s climate intelligence capabilities. 
The API currently enables users to access generated physical risk exposure datasets programmatically.
This guide helps users learn how to work with the API directly.</p>

<h2 id="quickstart">
<a class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<p>To quickly get up and going with the Climate Explorer API, you first must retrieve your API key.
Navigate to your <a href="https://explorer.sustglobal.io/account/profile/">Climate Explorer User Profile</a> and copy the value of <code class="language-plaintext highlighter-rouge">API Key</code>.
This value will be referenced below as <code class="language-plaintext highlighter-rouge">$APIKEY</code>.</p>

<p>Open a local terminal, then run the following <code class="language-plaintext highlighter-rouge">curl</code> command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: ec-DEMO"
</code></pre></div></div>

<p>A successful response from the portfolios endpoint will contain a set of all portfolios you currently may access.
For example, a single portfolio named “MRTG_demo”:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"portfolio_id": "632b0c0aae178b6e",
"portfolio_name": "MRTG_demo_portfolio",
"created_at": "2022-06-08T09:24:50Z",
"updated_at": "2022-10-03T15:02:02Z",
"status": "Risk data available"
}
</code></pre></div></div>

<p>This response status (“Risk data available”) tells us that the <code class="language-plaintext highlighter-rouge">MRTG_demo_portfolio</code> portfolio already contains physical risk exposure data.
Before we fetch any risk-related data, we will first retrieve the assets from the portfolio:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/MRTG_demo_portfolio/assets" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: ec-DEMO"
</code></pre></div></div>

<p>The output below is a single object from the list of assets you will observe:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"portfolio_name": "MRTG_demo_portfolio",
"portfolio_index": 1,
"entity_id": "",
"entity_name": "282",
"labels": {
  "type": "Land",
  "price": "$3,950,000.00",
  "address": "Lower Buckeye Road, Buckeye, AZ, 85326"
},
"lat": 33.4210302,
"lng": -112.6298175
}
</code></pre></div></div>

<p>Now, we can fetch a summary of the risk exposure data pertaining to this portfolio with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/MRTG_demo_portfolio/datasets/physical/summary" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: ec-DEMO"
</code></pre></div></div>

<p>A single object from the response is displayed below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"portfolio_name": "MRTG_demo_portfolio",
"portfolio_index": 0,
"entity_name": "26",
"entity_id": "",
"window": 5,
"window_start_year": 2022,
"scenario": "ssp126",
"risk_summaries": [
  {
    "hazard": "cyclone",
    "risk_class": "LOW",
    "risk_score": 0.0344486861607962
  },
  {
    "hazard": "flood_potential",
    "risk_class": "LOW",
    "risk_score": 0
  },
  {
    "hazard": "heatwave",
    "risk_class": "LOW",
    "risk_score": 0.055
  },
  {
    "hazard": "sea_level_rise",
    "risk_class": "LOW",
    "risk_score": 0
  },
  {
    "hazard": "water_stress",
    "risk_class": "LOW",
    "risk_score": 0.0756378421175013
  },
  {
    "hazard": "wildfire",
    "risk_class": "LOW",
    "risk_score": 0.0080123366443584
  }
 ]
}
</code></pre></div></div>

<p>To fetch the more granular timeseries data, we can use the “items” endpoint.
We can also apply some filters this time around: <code class="language-plaintext highlighter-rouge">hazard=wildfire</code>, <code class="language-plaintext highlighter-rouge">scenario=ssp585</code>, and <code class="language-plaintext highlighter-rouge">start_date=2022</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/MRTG_demo_portfolio/datasets/physical/items?hazard=wildfire&amp;scenario=ssp585&amp;start_date=2022" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: ec-DEMO"
</code></pre></div></div>

<p>Below is a truncated object from the response:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"portfolio_name": "MRTG_demo_portfolio",
"portfolio_index": 5,
"entity_id": "",
"entity_name": "171",
"hazard": "wildfire",
"indicator": "wildfire_unified_prob",
"scenario": "ssp585",
"measure": "mid",
"risk_exposure": {
  "2022": 0.0024577002041041,
  "2023": 0.0397371985018253,
  "2024": 0.0130443815141916,
  "2025": 0.0121267260983586,
  "2026": 0.0074249189347028,
  "2027": 0.0198366455733776,
  "2028": 0.0168143846094608,
  "2029": 0.0275528505444526,
  "2030": 0.0196106024086475,
   ...
</code></pre></div></div>

<p>Read through the remainder of this document from here to learn about other aspects of the API.</p>

<h2 id="api-mechanics">
<a class="anchor" href="#api-mechanics" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Mechanics</h2>

<h3 id="authentication">
<a class="anchor" href="#authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authentication</h3>

<p>All API requests must be authenticated using an API key.
Find your own API key at in your <a href="https://explorer.sustglobal.io/account/profile/">Climate Explorer User Profile</a>.</p>

<p>To authenticate an API request, simply pass your API key as an HTTP header named <code class="language-plaintext highlighter-rouge">X-SustGlobal-APIKey</code>.
For example, if your API key were <code class="language-plaintext highlighter-rouge">FOOBAR</code> then you would authenticate your request like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/" --header "X-SustGlobal-APIKey: FOOBAR"
</code></pre></div></div>

<h3 id="projects">
<a class="anchor" href="#projects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Projects</h3>

<p>Note that a project must typically be indicated via a <code class="language-plaintext highlighter-rouge">project</code> HTTP header.
You can programmatically identify which projects you may access via the <code class="language-plaintext highlighter-rouge">/api/projects/</code> endpoint:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/projects/" --header "X-SustGlobal-APIKey: $APIKEY"
[
  {
    "project_id": "a19b6282de313211",
    "project_name": "ec-DEMO"
  }
]
</code></pre></div></div>

<p>You may use either the <code class="language-plaintext highlighter-rouge">project_id</code> or <code class="language-plaintext highlighter-rouge">project_name</code> value in the HTTP headers.
For example, using the project name:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: ec-DEMO"
</code></pre></div></div>

<p>…or the project ID:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl "https://explorer.sustglobal.io/api/portfolios/" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: a19b6282de313211"
</code></pre></div></div>

<h3 id="pagination">
<a class="anchor" href="#pagination" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pagination</h3>

<p>Many API endpoints support paginated requests. This allows a consumer of the API to make a series of API requests, each
time reading a subset of the total result set.</p>

<p>Users control pagination with the <code class="language-plaintext highlighter-rouge">page</code> and <code class="language-plaintext highlighter-rouge">rows</code> query parameters. The value of <code class="language-plaintext highlighter-rouge">rows</code> sets the maximum number of results
that the API should return for a given <code class="language-plaintext highlighter-rouge">page</code>.</p>

<p>The default <code class="language-plaintext highlighter-rouge">rows</code> value is 50, meaning that a client is forced to paginate their requests if more than 50 items exist in a given list.  The max value of <code class="language-plaintext highlighter-rouge">rows</code> is 250, and datasets over this limit will require multiple API calls to load.  This can be accelerated by using filters such as <code class="language-plaintext highlighter-rouge">hazard=wildfire</code>, as described above.  An example of fetching with pagination in Python can be found <a href="https://github.com/sustglobal/dev-center/blob/master/jupyter-notebooks/ClimateDataStudio/ClimateDataStudioExample.ipynb">here</a>.</p>

<p>An example of pagination over a set of 120 items might work like so:</p>

<ol>
  <li>Request one sets <code class="language-plaintext highlighter-rouge">page=1</code> and <code class="language-plaintext highlighter-rouge">rows=50</code>, receiving 50 items</li>
  <li>Request two sets <code class="language-plaintext highlighter-rouge">page=2</code> and <code class="language-plaintext highlighter-rouge">rows=50</code>, receiving 50 items</li>
  <li>Request two sets <code class="language-plaintext highlighter-rouge">page=3</code> and <code class="language-plaintext highlighter-rouge">rows=50</code>, receiving 20 items</li>
</ol>

<p>Note that once a set of items smaller in number than the value of <code class="language-plaintext highlighter-rouge">rows</code> is received from a paginated request, the client should halt any further requests.</p>

<h2 id="error-responses">
<a class="anchor" href="#error-responses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error Responses</h2>

<p>When an API request fails, clients should always consider the HTTP status code.
Status codes are used as accurately as possible. For example, when an invalid
request is made, a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> code will be returned.</p>

<p>In addition to the status code, clients should also attempt to parse a
JSON-encoded error response available in the HTTP response body.
The JSON object contains one of more human-readable errors, represented
as an array of strings. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "errors": [
        "lat: coordinate out of bounds"
    ]
}
</code></pre></div></div>

<p>It is inadvisable to attempt to parse meaningful data from error strings, as they
will evolve over time as Sust Global capabilities expand. In other words, there
is no contract established in the content of error strings.</p>

<h2 id="api-examples">
<a class="anchor" href="#api-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Examples</h2>

<p>This section contains a set of example commands you can run on your machine to interact with the API.</p>

<p>Note that many of the examples refer to environment variables that must be set manually:</p>
<ul>
  <li>Your API key, must be set in the <code class="language-plaintext highlighter-rouge">$APIKEY</code> environment variable. See <a href="#authentication">Authentication</a> to learn more about this.</li>
  <li>The <code class="language-plaintext highlighter-rouge">$PORTFOLIO</code> environment variable refers to the name of the portfolio you wish to work with. You determine this value.</li>
</ul>

<h3 id="create-a-portfolio">
<a class="anchor" href="#create-a-portfolio" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a Portfolio</h3>

<p>To create a new portfolio, simply run the following cURL command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -i -X POST "https://explorer.sustglobal.io/api/portfolios/" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT" --data-raw "{\"portfolio_name\": \"$PORTFOLIO\"}"
</code></pre></div></div>

<h3 id="upload-assets-to-a-portfolio">
<a class="anchor" href="#upload-assets-to-a-portfolio" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upload Assets to a Portfolio</h3>

<p>Once you have created a portfolio, you may upload a CSV file containing your assets using the following command.
The value of <code class="language-plaintext highlighter-rouge">$ASSET_FILE</code> must be the location of a local CSV file containing assets.
Please see the <a href="/explorer.html">Climate Explorer Guide</a> for more information about assets and CSV file requirements.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -i -F asset=@$ASSET_FILE "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/assets/import/" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<h3 id="export-portfolio-assets">
<a class="anchor" href="#export-portfolio-assets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Export Portfolio Assets</h3>

<p>It may be useful to download all assets in a given portfolio to a local CSV file.
This is primarily useful when you intend to re-upload a modified set of assets to a portfolio.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -OJ "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/assets/export" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<p>A CSV file will be written to the filesystem.</p>

<h3 id="fetch-physical-risk-exposure-timeseries-data">
<a class="anchor" href="#fetch-physical-risk-exposure-timeseries-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fetch Physical Risk Exposure Timeseries Data</h3>

<p>After physical risk exposure data has been generated, one may interact with it natively via the API:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -i "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/datasets/physical/items" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<p>Note that this endpoint will contain a lot of data, so you should be familiar with pagination controls. Documentation is
available earlier in this guide.</p>

<p>Additional query parameters that may be useful include <code class="language-plaintext highlighter-rouge">scenario</code>, <code class="language-plaintext highlighter-rouge">hazard</code>, <code class="language-plaintext highlighter-rouge">indicator</code> and `measure.
An example of filtering the risk exposure dataset to SSP2-4.5 for a specific wildfire-related indicator:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -i "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/datasets/physical/items?scenario=ssp245&amp;hazard=wildfire&amp;indicator=unfied_prob&amp;measure=mid" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<p>Please review the API Reference for documentation of all supported query parameters.</p>

<h3 id="summarize-physical-risk-exposure">
<a class="anchor" href="#summarize-physical-risk-exposure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summarize Physical Risk Exposure</h3>

<p>A summary of physical risk exposure data with an optional <code class="language-plaintext highlighter-rouge">scenario</code> filter is available via API:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -i "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/datasets/physical/summary" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<h3 id="export-physical-risk-exposure">
<a class="anchor" href="#export-physical-risk-exposure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Export Physical Risk Exposure</h3>

<p>Download a ZIP archive containing the physical risk exposure data for a specific portfolio using the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -OJ "https://explorer.sustglobal.io/api/portfolios/$PORTFOLIO/datasets/physical/export" --header "X-SustGlobal-APIKey: $APIKEY" --header "X-SustGlobal-Project: $PROJECT"
</code></pre></div></div>

<p>A ZIP file will be written to the filesystem.</p>

<h2 id="api-endpoint-reference">
<a class="anchor" href="#api-endpoint-reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Endpoint Reference</h2>

<p>You may access the <a href="https://explorer.sustglobal.io/redoc/">Climate Explorer API Reference</a>, which describes every REST endpoint, parameter, request and response.</p>

<h2 id="openapi--swagger">
<a class="anchor" href="#openapi--swagger" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenAPI / Swagger</h2>

<p>The Climate Explorer API is documented using OpenAPI (Swagger).
You may access the document at the following URI:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://explorer.sustglobal.io/swagger.json
</code></pre></div></div>

<p>This URL is publicly-accessible and is automatically updated as the API evolves.</p>

<h2 id="citing-sust-global-api">
<a class="anchor" href="#citing-sust-global-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Citing Sust Global API</h2>

<p>From a concept to adoption by an emerging group of early adopters, many people have invested time and energy in developing and enabling access to Sust Global’s capabilities. Please cite Sust Global when using our data and insights. To cite Sust Global’s data in publications, please use the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sust Inc (2021). Sust Global Application Programming Interface: Transforming frontier climate science to actionable data. https://developers.sustglobal.com.
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Misc{,
  author       = {Sust Global Team},
  organization = {Sust Inc},
  title        = {Sust Global Application Programming Interface: Transforming frontier climate science to actionable data},
  year         = {2021--},
  url          = "https://developers.sustglobal.com"
}
</code></pre></div></div>

          </div>
        </div>

        
        <div class="col-3">
          <div id="toc-container">
            <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#quickstart">Quickstart</a></li>
<li class="toc-entry toc-h2"><a href="#api-mechanics">API Mechanics</a>
<ul>
<li class="toc-entry toc-h3"><a href="#authentication">Authentication</a></li>
<li class="toc-entry toc-h3"><a href="#projects">Projects</a></li>
<li class="toc-entry toc-h3"><a href="#pagination">Pagination</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#error-responses">Error Responses</a></li>
<li class="toc-entry toc-h2"><a href="#api-examples">API Examples</a>
<ul>
<li class="toc-entry toc-h3"><a href="#create-a-portfolio">Create a Portfolio</a></li>
<li class="toc-entry toc-h3"><a href="#upload-assets-to-a-portfolio">Upload Assets to a Portfolio</a></li>
<li class="toc-entry toc-h3"><a href="#export-portfolio-assets">Export Portfolio Assets</a></li>
<li class="toc-entry toc-h3"><a href="#fetch-physical-risk-exposure-timeseries-data">Fetch Physical Risk Exposure Timeseries Data</a></li>
<li class="toc-entry toc-h3"><a href="#summarize-physical-risk-exposure">Summarize Physical Risk Exposure</a></li>
<li class="toc-entry toc-h3"><a href="#export-physical-risk-exposure">Export Physical Risk Exposure</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#api-endpoint-reference">API Endpoint Reference</a></li>
<li class="toc-entry toc-h2"><a href="#openapi--swagger">OpenAPI / Swagger</a></li>
<li class="toc-entry toc-h2"><a href="#citing-sust-global-api">Citing Sust Global API</a></li>
</ul>
          </div>
        </div>
        

      </div>

    </div>

  </body>
</html>
